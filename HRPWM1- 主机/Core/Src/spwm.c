#include "stm32g4xx_hal.h"
#include "main.h"
#include "spwm.h"
#include "key.h"
#define SINTABLE_LENGTH 500   
float Sin_Duty[SINTABLE_LENGTH];
volatile uint16_t DutyPointer;                                   //µ÷ÖÆ¶È
float Modulation=1000.0f;
float SinTable[SINTABLE_LENGTH] = {
6000,6069,6138,6207,6276,6345,6414,6483,6551,6620,6689,6757,6826,6894,6962,7030,
7098,7166,7233,7300,7367,7434,7501,7567,7633,7699,7765,7830,7895,7960,8024,8088,
8152,8215,8279,8341,8404,8466,8527,8588,8649,8710,8769,8829,8888,8947,9005,9062,
9119,9176,9232,9288,9343,9398,9452,9505,9558,9611,9663,9714,9765,9815,9864,9913,
9961,10009,10056,10102,10148,10193,10237,10281,10324,10366,10408,10449,10489,10529,10568,10606,
10643,10680,10716,10751,10786,10819,10852,10884,10916,10946,10976,11005,11033,11061,11087,11113,
11138,11163,11186,11209,11230,11251,11271,11291,11309,11327,11343,11359,11374,11389,11402,11415,
11426,11437,11447,11456,11464,11472,11478,11484,11489,11493,11496,11498,11499,11500,11499,11498,
11496,11493,11489,11484,11478,11472,11464,11456,11447,11437,11426,11415,11402,11389,11374,11359,
11343,11327,11309,11291,11271,11251,11230,11209,11186,11163,11138,11113,11087,11061,11033,11005,
10976,10946,10916,10884,10852,10819,10786,10751,10716,10680,10643,10606,10568,10529,10489,10449,
10408,10366,10324,10281,10237,10193,10148,10102,10056,10009,9961,9913,9864,9815,9765,9714,
9663,9611,9558,9505,9452,9398,9343,9288,9232,9176,9119,9062,9005,8947,8888,8829,
8769,8710,8649,8588,8527,8466,8404,8341,8279,8215,8152,8088,8024,7960,7895,7830,
7765,7699,7633,7567,7501,7434,7367,7300,7233,7166,7098,7030,6962,6894,6826,6757,
6689,6620,6551,6483,6414,6345,6276,6207,6138,6069,6000,5930,5861,5792,5723,5654,
5585,5516,5448,5379,5310,5242,5173,5105,5037,4969,4901,4833,4766,4699,4632,4565,
4498,4432,4366,4300,4234,4169,4104,4039,3975,3911,3847,3784,3720,3658,3595,3533,
3472,3411,3350,3289,3230,3170,3111,3052,2994,2937,2880,2823,2767,2711,2656,2601,
2547,2494,2441,2388,2336,2285,2234,2184,2135,2086,2038,1990,1943,1897,1851,1806,
1762,1718,1675,1633,1591,1550,1510,1470,1431,1393,1356,1319,1283,1248,1213,1180,
1147,1115,1083,1053,1023,994,966,938,912,886,861,836,813,790,769,748,
728,708,690,672,656,640,625,610,597,584,573,562,552,543,535,527,
521,515,510,506,503,501,500,500,500,501,503,506,510,515,521,527,
535,543,552,562,573,584,597,610,625,640,656,672,690,708,728,748,
769,790,813,836,861,886,912,938,966,994,1023,1053,1083,1115,1147,1180,
1213,1248,1283,1319,1356,1393,1431,1470,1510,1550,1591,1633,1675,1718,1762,1806,
1851,1897,1943,1990,2038,2086,2135,2184,2234,2285,2336,2388,2441,2494,2547,2601,
2656,2711,2767,2823,2880,2937,2994,3052,3111,3170,3230,3289,3350,3411,3472,3533,
3595,3658,3720,3784,3847,3911,3975,4039,4104,4169,4234,4300,4366,4432,4498,4565,
4632,4699,4766,4833,4901,4969,5037,5105,5173,5242,5310,5379,5448,5516,5585,5654,
5723,5792,5861,5930};
void InitTimerVariable(void)
{
    uint16_t i,j;

    Timer_1ms = 0;
    DutyPointer = 0;

    for(i = 0, j = 0; i < SINTABLE_LENGTH;i++)
    {
        Sin_Duty[j++] = SinTable[i] ;            // 500 point SinTable
    }
}
